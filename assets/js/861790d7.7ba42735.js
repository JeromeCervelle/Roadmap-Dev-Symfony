"use strict";(self.webpackChunkroadmap_symfony=self.webpackChunkroadmap_symfony||[]).push([[7018],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return f}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(t),f=o,d=c["".concat(l,".").concat(f)]||c[f]||m[f]||a;return t?r.createElement(d,s(s({ref:n},p),{},{components:t})):r.createElement(d,s({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=c;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=t[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},8248:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),s=["components"],i={sidebar_position:6},l="Les formulaires",u={unversionedId:"symfony/formulaires",id:"symfony/formulaires",isDocsHomePage:!1,title:"Les formulaires",description:"Bien qu'il soit tout \xe0 fait possible de g\xe9rer les formulaires comme on le fait d'habitude en PHP (en analysant la requ\xeate), Symfony propose une autre solution, plus puissante.",source:"@site/docs/06-symfony/06-formulaires.md",sourceDirName:"06-symfony",slug:"/symfony/formulaires",permalink:"/Roadmap-Dev-Symfony/docs/symfony/formulaires",editUrl:"https://github.com/yoanbernabeu/Roadmap-Dev-Symfony/edit/main/docs/06-symfony/06-formulaires.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Les mod\xe8les",permalink:"/Roadmap-Dev-Symfony/docs/symfony/modeles"},next:{title:"Les services",permalink:"/Roadmap-Dev-Symfony/docs/symfony/services"}},p=[{value:"Ressources",id:"ressources",children:[],level:2}],m={toc:p};function c(e){var n=e.components,t=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"les-formulaires"},"Les formulaires"),(0,a.kt)("p",null,"Bien qu'il soit tout \xe0 fait possible de g\xe9rer les formulaires comme on le fait d'habitude en PHP (en analysant la requ\xeate), Symfony propose une autre solution, plus puissante."),(0,a.kt)("p",null,"Elle consiste en l'introduction d'un objet ",(0,a.kt)("inlineCode",{parentName:"p"},"Form"),", sur lequel on a des m\xe9thodes pour ajouter des champs, relier le formulaire a une entit\xe9, g\xe9rer les erreurs de validation, v\xe9rifier qu'un formulaire a \xe9t\xe9 soumis et qu'il est valide, etc. C\xf4t\xe9 vue, on dispose de commandes Twig pour afficher le formulaire, g\xe9rer son apparence, l'affichage des erreurs, etc."),(0,a.kt)("p",null,"Reprenons notre exemple de l'entit\xe9 ",(0,a.kt)("inlineCode",{parentName:"p"},"Post")," qu'on a vu dans le chapitre pr\xe9c\xe9dent. Pour g\xe9rer le formulaire qui va permettre d'ajouter un nouvel article, on va d'abord cr\xe9er une classe ",(0,a.kt)("inlineCode",{parentName:"p"},"PostType"),", qu'on rangera dans un dossier ",(0,a.kt)("inlineCode",{parentName:"p"},"Form"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"namespace App\\Form;\n\nuse App\\Entity\\Post;\nuse Symfony\\Component\\Form\\AbstractType;\nuse Symfony\\Component\\Form\\Extension\\Core\\Type\\SubmitType;\nuse Symfony\\Component\\Form\\FormBuilderInterface;\nuse Symfony\\Component\\OptionsResolver\\OptionsResolver;\n\nclass PostType extends AbstractType\n{\n    public function buildForm(FormBuilderInterface $builder, array $options): void\n    {\n        $builder\n            ->add('title')\n            ->add('content')\n            ->add('save', SubmitType::class, ['label' => 'Sauvegarder']);\n    }\n\n    public function configureOptions(OptionsResolver $resolver): void\n    {\n        $resolver->setDefaults([\n            'data_class' => Post::class,\n        ]);\n    }\n}\n")),(0,a.kt)("p",null,"Puis dans le contr\xf4leur, on g\xe8re le formulaire. Une seule route peut servir \xe0 prendre en compte l'affichage du formulaire et sa soumission."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"use App\\Entity\\Post;\nuse App\\Form\\PostType;\nuse Doctrine\\ORM\\EntityManagerInterface;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\n#[Route('/post/new', name: 'post_create')]\npublic function newPost(Request $request, EntityManagerInterface $entityManager): Response\n{\n    $post = new Post();\n\n    $form = $this->createForm(PostType::class, $post);\n\n    $form->handleRequest($request);\n    if ($form->isSubmitted() && $form->isValid()) {\n        $entityManager->persist($post);\n        $entityManager->flush();\n\n        return $this->redirectToRoute('home');\n    }\n\n    return $this->renderForm('post/new.html.twig', [\n        'postForm' => $form,\n    ]);\n}\n")),(0,a.kt)("p",null,"Ici, l'objet ",(0,a.kt)("inlineCode",{parentName:"p"},"post")," va automatiquement \xeatre rempli avec les donn\xe9es saisies. On v\xe9rifie si un formulaire a \xe9t\xe9 soumis et si les donn\xe9es rentr\xe9es sont valides, si c'est le cas on sauvegarde l'entit\xe9e."),(0,a.kt)("p",null,"C\xf4t\xe9 vue, on utilise des commandes Twig pour afficher le formulaire."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"{% form_theme postForm 'bootstrap_5_layout.html.twig' %}\n\n{{form_start(postForm)}}\n\n{{form_row(postForm.title, {attr: { placeholder: \"Titre de l'article\"}, label: 'Titre'})}}\n{{form_row(postForm.content, {attr: { placeholder: \"Contenu de l'article\", rows: 20}, label: 'Contenu'})}}\n\n{{form_end(postForm)}}\n")),(0,a.kt)("p",null,"Ici, on utilise un template Bootstrap fourni par Symfony. On peut afficher le formulaire entier avec une seul commande ",(0,a.kt)("inlineCode",{parentName:"p"},"{{ form(Postform) }}")," ou bien g\xe9rer les champs un \xe0 un comme dans l'exemple. "),(0,a.kt)("p",null,"Symfony g\xe9n\xe8re un formulaire qui prend en compte la validation HTML5 c\xf4t\xe9 client, en fonction des contraintes des entit\xe9es. Une validation c\xf4t\xe9 serveur a \xe9galement lieu. Si il y a des erreurs de validation, on peut les afficher avec la commande ",(0,a.kt)("inlineCode",{parentName:"p"},"{{ form_errors(form) }}")," (ici elles sont prises en compte par le template Bootstrap)."),(0,a.kt)("h2",{id:"ressources"},"Ressources"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=_cgZheTv-FQ&ab_channel=LiorCHAMLA-WebDevelopMe"},"Apprendre \xe0 g\xe9rer les formulaires avec Symfony par Lior Chamla"))))}c.isMDXComponent=!0}}]);